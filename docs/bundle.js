!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var r in t)("object"==typeof exports?exports:e)[r]=t[r]}}(window,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var i=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.device=n.device||void 0,this.filters=n.filters||[{vendorId:9025,productId:32822},{vendorId:9025,productId:54},{vendorId:10755,productId:32822},{vendorId:10755,productId:54},{vendorId:10755,productId:64},{vendorId:10755,productId:32832},{vendorId:10374,productId:32770}],this.universe=n.universe||new Array(512).fill(0)}return r(e,[{key:"enable",value:function(){var e=this;return navigator.usb.requestDevice({filters:this.filters}).then(function(n){e.device=n})}},{key:"getPairedDevice",value:function(){return navigator.usb.getDevices().then(function(e){return e[0]})}},{key:"autoConnect",value:function(){var e=this;return this.getPairedDevice().then(function(n){return e.device=n,new Promise(function(n,t){return void 0===e.device?t(new Error("Can not find USB device.")):n(e.connect())})})}},{key:"connect",value:function(){var e=this;return this.device.open().then(function(){if(null===e.device.configuration)return e.device.selectConfiguration(1)}).then(function(){return e.device.claimInterface(2)}).then(function(){return e.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:2})}).catch(function(e){return console.log(e)})}},{key:"send",value:function(e){var n=this;return new Promise(function(t,r){if(void 0===n.device)return r(new Error("USB device is not connected to the computer"));var i=Uint8Array.from(e);return t(n.device.transferOut(4,i))})}},{key:"updateUniverse",value:function(e,n){var t=this;return new Promise(function(r,i){if(e-=1,Number.isInteger(n))t.universe.splice(e,1,n);else{if(!Array.isArray(n))return i(new Error("Could not update Universe because the provided value is not of type Integer or Array"));var o;(o=t.universe).splice.apply(o,[e,n.length].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(n)))}return r(t.send(t.universe))})}},{key:"disconnect",value:function(){var e=this;return this.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:2}).then(function(){return e.device.close()})}}]),e}();n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var i=function(){function e(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.output=t.output,this.logUniverseElement=t.logUniverseElement,this.logUniverseEnabled=!1,this.logUniverseElement.addEventListener("change",function(e){var t=e.target;n.logUniverseEnabled=t.checked})}return r(e,[{key:"log",value:function(e,n,t){var r="";switch(t){case"USBDevice":r=e+": "+n;break;case"array":r=e+JSON.stringify(n);break;case"keyvalue":r=e+": "+n;break;default:r=e+" "+n}console.log(r),this.output.value+=r+"\n",this.output.scrollTop=this.output.scrollHeight}},{key:"logUsbDevice",value:function(e){this.log("---","","string"),this.log("Selected device",e.productName,"USBDevice"),this.log("---","","string");e.configuration,e.configurations;var n=e.deviceClass,t=e.deviceProtocol,r=e.deviceSubclass,i=e.deviceVersionMajor,o=e.deviceVersionMinor,u=e.deviceVersionSubminor,c=e.manufacturerName,a=e.opened,s=e.productId,l=e.productName,v=e.serialNumber,d=e.usbVersionMajor,f=e.usbVersionMinor,g=e.usbVersionSubminor,h=e.vendorId,p=h.toString(16),y=s.toString(16);this.log("Opened",a,"keyvalue"),this.log("Vendor ID",h+" (0x"+p+")","keyvalue"),this.log("Manufacturer Name",c,"keyvalue"),this.log("Product ID",s+" (0x"+y+")","keyvalue"),this.log("Product Name",l,"keyvalue"),this.log("Serialnumber",v,"keyvalue"),this.log("Device Class",n,"keyvalue"),this.log("Device Protocol",t,"keyvalue"),this.log("Device Subclass",r,"keyvalue"),this.log("Device Version Major",i,"keyvalue"),this.log("Device Version Minor",o,"keyvalue"),this.log("Device Version Subminor",u,"keyvalue"),this.log("USB Version Major",d,"keyvalue"),this.log("USB Version Minor",f,"keyvalue"),this.log("USB Version Subminor",g,"keyvalue")}},{key:"logUniverse",value:function(e){this.logUniverseEnabled&&this.log("",e,"array")}}]),e}();n.default=i},function(e,n,t){"use strict";var r=o(t(0)),i=o(t(1));function o(e){return e&&e.__esModule?e:{default:e}}var u=new r.default,c=new i.default({output:document.getElementById("console"),logUniverseElement:document.getElementById("logUniverse")}),a=document.getElementById("activateWebUsb"),s=document.getElementById("disconnectWebUsb"),l=document.getElementById("updateAnyChannel"),v=document.getElementById("changeColor"),d=document.getElementById("changeDimmer"),f=document.getElementById("changeUv"),g=document.getElementById("changeStrobe");a.addEventListener("click",function(e){u.enable().then(function(){u.connect().then(function(){c.logUsbDevice(u.device)})}).catch(function(){c.log("No USB device was selected","","string")})}),s.addEventListener("click",function(e){u.disconnect().then(function(){c.log("Destroyed connection to USB device, but USB device is still paired with the browser","","string")})}),u.autoConnect().then(function(){c.log("Found an already paired USB device","","string"),c.logUsbDevice(u.device)}).catch(function(e){c.log("autoConnect:",e,"string")}),l.addEventListener("submit",function(e){e.preventDefault();var n=new FormData(l),t=parseInt(n.get("channel"),10),r=parseInt(n.get("value"),10);c.log("---","","string"),c.log("Set Channel "+t+" to "+r,"","string"),u.updateUniverse(t,r).then(function(){c.logUniverse(u.universe)}).catch(function(e){c.logUniverse(u.universe),c.log(e,"","string")})}),v.addEventListener("change",function(e){var n=e.target.value.match(/[A-Za-z0-9]{2}/g).map(function(e){return parseInt(e,16)});c.log("---","","string"),c.log("Set Color on Channel 1 - 3 to "+n,"","string"),u.updateUniverse(1,n).then(function(){c.logUniverse(u.universe)}).catch(function(e){c.logUniverse(u.universe),c.log(e,"","string")})}),f.addEventListener("change",function(e){var n=parseInt(e.target.value,10);c.log("---","","string"),c.log("Set UV on Channel 4 to "+n,"","string"),u.updateUniverse(4,n).then(function(){c.logUniverse(u.universe)}).catch(function(e){c.logUniverse(u.universe),c.log(e,"","string")})}),d.addEventListener("change",function(e){var n=parseInt(e.target.value,10);c.log("---","","string"),c.log("Set Dimmer on Channel 5 to "+n,"","string"),u.updateUniverse(5,n).then(function(){c.logUniverse(u.universe)}).catch(function(e){c.logUniverse(u.universe),c.log(e,"","string")})}),g.addEventListener("change",function(e){var n=parseInt(e.target.value,10);c.log("---","","string"),c.log("Set Strobe on Channel 6 to "+n,"","string"),u.updateUniverse(6,n).then(function(){c.logUniverse(u.universe)}).catch(function(e){c.logUniverse(u.universe),c.log(e,"","string")})})}])});
//# sourceMappingURL=bundle.js.map